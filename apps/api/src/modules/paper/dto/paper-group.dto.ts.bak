import { ApiProperty, ApiPropertyOptional, PartialType } from '@nestjs/swagger';
import { IsString, IsOptional, IsBoolean, IsInt, IsNumber, IsEnum } from 'class-validator';
import { Type } from 'class-transformer';

// 단가 단위
export const UNIT_TYPE_OPTIONS = ['sheet', 'roll', 'ream', 'sqm'] as const;
export type UnitType = typeof UNIT_TYPE_OPTIONS[number];

// 그룹 컬러
export const GROUP_COLOR_OPTIONS = ['green', 'blue', 'yellow', 'red', 'purple', 'orange', 'gray'] as const;
export type GroupColor = typeof GROUP_COLOR_OPTIONS[number];

export class CreatePaperGroupDto {
  @ApiPropertyOptional({ description: '그룹 코드 (자동생성)', example: 'PG001' })
  @IsOptional()
  @IsString()
  code?: string;

  @ApiProperty({ description: '그룹명', example: '광택지' })
  @IsString()
  name: string;

  @ApiProperty({ description: '그룹 구분 색상', enum: GROUP_COLOR_OPTIONS, example: 'green' })
  @IsEnum(GROUP_COLOR_OPTIONS)
  color: GroupColor;

  @ApiPropertyOptional({ description: '그룹 기본 단가', default: 0 })
  @IsOptional()
  @Type(() => Number)
  @IsNumber()
  basePrice?: number;

  @ApiPropertyOptional({ description: '단가 단위', enum: UNIT_TYPE_OPTIONS, default: 'ream' })
  @IsOptional()
  @IsEnum(UNIT_TYPE_OPTIONS)
  unitType?: UnitType;

  @ApiPropertyOptional({ description: '설명' })
  @IsOptional()
  @IsString()
  description?: string;

  @ApiPropertyOptional({ description: '정렬 순서', default: 0 })
  @IsOptional()
  @Type(() => Number)
  @IsInt()
  sortOrder?: number;

  @ApiPropertyOptional({ description: '활성화 여부', default: true })
  @IsOptional()
  @IsBoolean()
  isActive?: boolean;
}

export class UpdatePaperGroupDto extends PartialType(CreatePaperGroupDto) {}
