generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  role      String   @default("staff")
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}

model SystemSetting {
  id        String   @id @default(cuid())
  key       String   @unique
  value     String
  category  String
  label     String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([category])
  @@map("system_settings")
}

model DeliveryPricing {
  id                   String   @id @default(cuid())
  deliveryMethod       String   @unique
  name                 String
  baseFee              Decimal  @default(0) @db.Decimal(10, 2)
  distanceRanges       Json?
  extraPricePerKm      Decimal? @db.Decimal(10, 2)
  maxBaseDistance      Int?
  nightSurchargeRate   Decimal? @db.Decimal(5, 2)
  nightStartHour       Int?     @default(22)
  nightEndHour         Int?     @default(6)
  weekendSurchargeRate Decimal? @db.Decimal(5, 2)
  sizeRanges           Json?
  islandFee            Decimal? @db.Decimal(10, 2)
  freeThreshold        Decimal? @db.Decimal(10, 2)
  sortOrder            Int      @default(0)
  isActive             Boolean  @default(true)
  createdAt            DateTime @default(now())
  updatedAt            DateTime @updatedAt
  packagingFee         Decimal? @db.Decimal(10, 2)
  shippingFee          Decimal? @db.Decimal(10, 2)

  @@map("delivery_pricings")
}

model Department {
  id          String   @id @default(cuid())
  code        String   @unique
  name        String
  description String?
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  staff       Staff[]

  @@map("departments")
}

model Staff {
  id                      String        @id @default(cuid())
  staffId                 String        @unique
  password                String
  name                    String
  branchId                String?
  departmentId            String?
  position                String?
  phone                   String?
  mobile                  String?
  email                   String?
  postalCode              String?
  address                 String?
  addressDetail           String?
  settlementGrade         Int           @default(1)
  allowedIps              String[]      @default([])
  canEditInManagerView    Boolean       @default(false)
  isSuperAdmin            Boolean       @default(false)
  canLoginAsManager       Boolean       @default(false)
  canChangeDepositStage   Boolean       @default(false)
  canChangeReceptionStage Boolean       @default(false)
  canChangeCancelStage    Boolean       @default(false)
  canEditMemberInfo       Boolean       @default(false)
  canViewSettlement       Boolean       @default(false)
  canChangeOrderAmount    Boolean       @default(false)
  memberViewScope         String        @default("own")
  salesViewScope          String        @default("own")
  menuPermissions         Json?
  categoryPermissions     Json?
  processPermissions      Json?
  isActive                Boolean       @default(true)
  lastLoginAt             DateTime?
  lastLoginIp             String?
  adminMemo               String?
  joinDate                DateTime      @default(now())
  createdAt               DateTime      @default(now())
  updatedAt               DateTime      @updatedAt
  isCompany               Boolean       @default(false)
  isDepartment            Boolean       @default(true)
  isPersonal              Boolean       @default(false)
  branch                  Branch?       @relation(fields: [branchId], references: [id])
  department              Department?   @relation(fields: [departmentId], references: [id])
  assignedClients         StaffClient[]

  @@index([branchId])
  @@index([departmentId])
  @@index([isActive])
  @@map("staff")
}

model StaffClient {
  id        String   @id @default(cuid())
  staffId   String
  clientId  String
  isPrimary Boolean  @default(false)
  createdAt DateTime @default(now())
  client    Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)
  staff     Staff    @relation(fields: [staffId], references: [id], onDelete: Cascade)

  @@unique([staffId, clientId])
  @@index([staffId])
  @@index([clientId])
  @@map("staff_clients")
}

model PermissionTemplate {
  id          String   @id @default(cuid())
  name        String   @unique
  description String?
  permissions Json
  isDefault   Boolean  @default(false)
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("permission_templates")
}

model Branch {
  id             String        @id @default(cuid())
  branchCode     String        @unique
  branchName     String
  isHeadquarters Boolean       @default(false)
  address        String?
  phone          String?
  isActive       Boolean       @default(true)
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  clientGroups   ClientGroup[]
  staff          Staff[]

  @@map("branches")
}

model ClientGroup {
  id                      String                        @id @default(cuid())
  groupCode               String                        @unique
  groupName               String
  branchId                String
  generalDiscount         Int                           @default(100)
  premiumDiscount         Int                           @default(100)
  importedDiscount        Int                           @default(100)
  description             String?
  isActive                Boolean                       @default(true)
  sortOrder               Int                           @default(0)
  createdAt               DateTime                      @default(now())
  updatedAt               DateTime                      @updatedAt
  branch                  Branch                        @relation(fields: [branchId], references: [id])
  clients                 Client[]
  halfProductPrices       GroupHalfProductPrice[]
  productPrices           GroupProductPrice[]
  productionSettingPrices GroupProductionSettingPrice[]

  @@index([branchId])
  @@map("client_groups")
}

model Client {
  id                      String                         @id @default(cuid())
  clientCode              String                         @unique
  clientName              String
  businessNumber          String?
  representative          String?
  phone                   String?
  mobile                  String?
  email                   String?
  password                String?
  postalCode              String?
  address                 String?
  addressDetail           String?
  groupId                 String?
  memberType              String                         @default("individual")
  oauthProvider           String?
  oauthId                 String?
  priceType               String                         @default("standard")
  paymentType             String                         @default("order")
  creditEnabled           Boolean                        @default(false)
  creditPeriodDays        Int?
  creditPaymentDay        Int?
  creditBlocked           Boolean                        @default(false)
  creditBlockedAt         DateTime?
  lastPaymentDate         DateTime?
  shippingType            String                         @default("conditional")
  creditGrade             String                         @default("B")
  paymentTerms            Int                            @default(30)
  status                  String                         @default("active")
  createdAt               DateTime                       @default(now())
  updatedAt               DateTime                       @updatedAt
  acquisitionChannel      String?
  assignedManager         String?
  businessCategory        String?
  businessType            String?
  colorProfile            String?
  contactPerson           String?
  contactPhone            String?
  deliveryNote            String?
  hasLogo                 Boolean                        @default(false)
  isBlacklist             Boolean                        @default(false)
  isWhitelist             Boolean                        @default(false)
  logoPath                String?
  mainGenre               String?
  memberGrade             String                         @default("normal")
  monthlyOrderVolume      String?
  preferredFinish         String?
  preferredSize           String?
  recentMemo              String?
  sensitivityScore        Int                            @default(3)
  taxInvoiceEmail         String?
  taxInvoiceMethod        String?
  totalClaims             Int                            @default(0)
  duplicateCheckMonths    Int?
  addresses               ClientAddress[]
  albumPreference         ClientAlbumPreference?
  productionSettingPrices ClientProductionSettingPrice[]
  group                   ClientGroup?                   @relation(fields: [groupId], references: [id])
  consultations           Consultation[]
  copperPlates            CopperPlate[]
  healthScore             CustomerHealthScore?
  myProducts              MyProduct[]
  orders                  Order[]
  photobookOrders         PhotobookOrder[]
  purchaseLedgers         PurchaseLedger[]               @relation("PurchaseLedgerSupplier")
  salesLedgers            SalesLedger[]                  @relation("SalesLedgerClient")
  assignedStaff           StaffClient[]

  @@unique([oauthProvider, oauthId])
  @@index([groupId])
  @@index([clientCode])
  @@index([memberType])
  @@index([oauthProvider])
  @@index([mainGenre])
  @@index([memberGrade])
  @@map("clients")
}

model ClientAlbumPreference {
  id                  String    @id @default(cuid())
  clientId            String    @unique
  preferredEditStyle  String?
  preferredBinding    String?
  preferredAlbumSizes Json?
  outfitGrouping      String?
  colorGroupEnabled   Boolean   @default(false)
  preferredFabricId   String?
  preferredCoatingId  String?
  editorNotes         String?
  specialInstructions String?
  totalOrders         Int       @default(0)
  lastOrderDate       DateTime?
  mostUsedSize        String?
  averagePageCount    Int?
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
  client              Client    @relation(fields: [clientId], references: [id], onDelete: Cascade)

  @@index([clientId])
  @@map("client_album_preferences")
}

model ClientAddress {
  id            String   @id @default(cuid())
  clientId      String
  addressName   String?
  recipientName String
  phone         String
  postalCode    String
  address       String
  addressDetail String?
  isDefault     Boolean  @default(false)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  client        Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)

  @@index([clientId])
  @@index([clientId, isDefault])
  @@map("client_addresses")
}

model Specification {
  id                    String                           @id @default(cuid())
  code                  String                           @unique
  name                  String
  widthInch             Decimal                          @db.Decimal(10, 4)
  heightInch            Decimal                          @db.Decimal(10, 4)
  widthMm               Decimal                          @db.Decimal(10, 2)
  heightMm              Decimal                          @db.Decimal(10, 2)
  orientation           String                           @default("landscape")
  pairId                String?
  forIndigo             Boolean                          @default(false)
  forInkjet             Boolean                          @default(false)
  forAlbum              Boolean                          @default(false)
  forFrame              Boolean                          @default(false)
  forBooklet            Boolean                          @default(false)
  squareMeters          Decimal?                         @db.Decimal(10, 2)
  description           String?
  nup                   String?
  nupSqInch             Decimal?                         @db.Decimal(10, 2)
  sortOrder             Int                              @default(0)
  isActive              Boolean                          @default(true)
  createdAt             DateTime                         @default(now())
  updatedAt             DateTime                         @updatedAt
  jdfBleedBottom        Decimal?                         @default(3) @db.Decimal(10, 2)
  jdfBleedLeft          Decimal?                         @default(3) @db.Decimal(10, 2)
  jdfBleedRight         Decimal?                         @default(3) @db.Decimal(10, 2)
  jdfBleedTop           Decimal?                         @default(3) @db.Decimal(10, 2)
  jdfFinishedHeight     Decimal?                         @db.Decimal(10, 2)
  jdfFinishedWidth      Decimal?                         @db.Decimal(10, 2)
  jdfNumberUpX          Int?                             @default(1)
  jdfNumberUpY          Int?                             @default(1)
  jdfPageOrder          String?                          @default("Booklet")
  jdfSides              String?                          @default("TwoSidedHeadToHead")
  jdfSpreadType         String?                          @default("Single")
  jdfTrimHeight         Decimal?                         @db.Decimal(10, 2)
  jdfTrimWidth          Decimal?                         @db.Decimal(10, 2)
  productSpecifications ProductSpecification[]
  productionSettings    ProductionSettingSpecification[]
  prices                SpecificationPrice[]

  @@index([isActive])
  @@index([forIndigo])
  @@index([forInkjet])
  @@index([forAlbum])
  @@index([forFrame])
  @@index([forBooklet])
  @@index([orientation])
  @@index([pairId])
  @@map("specifications")
}

model SpecificationPrice {
  id              String        @id @default(cuid())
  specificationId String
  priceType       String        @default("base")
  groupId         String?
  price           Decimal       @db.Decimal(12, 2)
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  specification   Specification @relation(fields: [specificationId], references: [id], onDelete: Cascade)

  @@unique([specificationId, priceType, groupId])
  @@map("specification_prices")
}

model SalesCategoryOption {
  id        String   @id @default(cuid())
  code      String   @unique
  name      String
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([isActive])
  @@map("sales_category_options")
}

model SalesCategory {
  id          String          @id @default(cuid())
  code        String          @unique
  name        String
  depth       Int             @default(1)
  parentId    String?
  sortOrder   Int             @default(0)
  isActive    Boolean         @default(true)
  description String?
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt
  parent      SalesCategory?  @relation("SalesCategoryTree", fields: [parentId], references: [id])
  children    SalesCategory[] @relation("SalesCategoryTree")

  @@index([parentId])
  @@index([isActive])
  @@map("sales_categories")
}

model Category {
  id              String        @id @default(cuid())
  code            String?       @unique
  name            String
  level           String
  depth           Int           @default(1)
  parentId        String?
  isVisible       Boolean       @default(true)
  isTopMenu       Boolean       @default(false)
  loginVisibility String        @default("always")
  categoryType    String        @default("HTML")
  productionForm  String?
  isOutsourced    Boolean       @default(false)
  pricingUnit     String?
  description     String?
  linkUrl         String?
  htmlContent     String?
  sortOrder       Int           @default(0)
  isActive        Boolean       @default(true)
  iconUrl         String?
  salesCategoryId String?
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
  nameEn          String?
  nameJa          String?
  nameZh          String?
  parent          Category?     @relation("CategoryHierarchy", fields: [parentId], references: [id])
  children        Category[]    @relation("CategoryHierarchy")
  halfProducts    HalfProduct[]
  products        Product[]

  @@index([parentId])
  @@index([categoryType])
  @@index([isTopMenu])
  @@map("categories")
}

model Product {
  id                  String                     @id @default(cuid())
  productCode         String                     @unique
  productName         String
  categoryId          String
  isActive            Boolean                    @default(true)
  isNew               Boolean                    @default(false)
  isBest              Boolean                    @default(false)
  memberType          String                     @default("all")
  basePrice           Decimal                    @db.Decimal(12, 2)
  thumbnailUrl        String?
  detailImages        String[]                   @default([])
  description         String?
  sortOrder           Int                        @default(0)
  createdAt           DateTime                   @default(now())
  updatedAt           DateTime                   @updatedAt
  bindingDirection    String                     @default("left")
  printType           String                     @default("double")
  orderCount          Int                        @default(0)
  viewCount           Int                        @default(0)
  outputPriceSettings Json?
  customOptions       CustomOption[]
  groupPrices         GroupProductPrice[]
  myProducts          MyProduct[]
  bindings            ProductBinding[]
  covers              ProductCover[]
  finishings          ProductFinishing[]
  foils               ProductFoil[]
  halfProducts        ProductHalfProduct[]
  papers              ProductPaper[]
  publicCopperPlates  ProductPublicCopperPlate[]
  specifications      ProductSpecification[]
  category            Category                   @relation(fields: [categoryId], references: [id])

  @@index([categoryId])
  @@map("products")
}

model ProductSpecification {
  id              String         @id @default(cuid())
  productId       String
  name            String
  widthMm         Float
  heightMm        Float
  price           Decimal        @default(0) @db.Decimal(10, 2)
  isDefault       Boolean        @default(false)
  sortOrder       Int            @default(0)
  specificationId String?
  product         Product        @relation(fields: [productId], references: [id], onDelete: Cascade)
  specification   Specification? @relation(fields: [specificationId], references: [id])

  @@unique([productId, specificationId])
  @@index([productId])
  @@index([specificationId])
  @@map("product_specifications")
}

model ProductBinding {
  id                  String  @id @default(cuid())
  productId           String
  name                String
  price               Decimal @default(0) @db.Decimal(10, 2)
  isDefault           Boolean @default(false)
  sortOrder           Int     @default(0)
  pricingType         String?
  productionSettingId String?
  product             Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@index([productionSettingId])
  @@map("product_bindings")
}

model ProductPaper {
  id           String  @id @default(cuid())
  productId    String
  name         String
  type         String
  price        Decimal @default(0) @db.Decimal(10, 2)
  isDefault    Boolean @default(false)
  sortOrder    Int     @default(0)
  grammage     Int?
  printMethod  String?
  frontCoating String?
  grade        Int?
  isActive     Boolean @default(true)
  product      Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_papers")
}

model ProductCover {
  id           String  @id @default(cuid())
  productId    String
  name         String
  materialCode String?
  price        Decimal @default(0) @db.Decimal(10, 2)
  imageUrl     String?
  isDefault    Boolean @default(false)
  sortOrder    Int     @default(0)
  product      Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_covers")
}

model ProductFoil {
  id        String  @id @default(cuid())
  productId String
  name      String
  color     String?
  price     Decimal @default(0) @db.Decimal(10, 2)
  isDefault Boolean @default(false)
  sortOrder Int     @default(0)
  product   Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("product_foils")
}

model ProductFinishing {
  id                String           @id @default(cuid())
  productId         String
  name              String
  productionGroupId String?
  price             Decimal          @default(0) @db.Decimal(10, 2)
  isDefault         Boolean          @default(false)
  sortOrder         Int              @default(0)
  product           Product          @relation(fields: [productId], references: [id], onDelete: Cascade)
  productionGroup   ProductionGroup? @relation(fields: [productionGroupId], references: [id], onDelete: SetNull)

  @@index([productId])
  @@index([productionGroupId])
  @@map("product_finishings")
}

model CustomOption {
  id         String  @id @default(cuid())
  productId  String
  name       String
  type       String
  values     Json?
  price      Decimal @default(0) @db.Decimal(10, 2)
  isRequired Boolean @default(false)
  sortOrder  Int     @default(0)
  product    Product @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([productId])
  @@map("custom_options")
}

model ProductHalfProduct {
  id            String      @id @default(cuid())
  productId     String
  halfProductId String
  isRequired    Boolean     @default(false)
  sortOrder     Int         @default(0)
  halfProduct   HalfProduct @relation(fields: [halfProductId], references: [id], onDelete: Cascade)
  product       Product     @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([productId, halfProductId])
  @@map("product_half_products")
}

model HalfProduct {
  id                String                     @id @default(cuid())
  code              String                     @unique
  name              String
  categoryLargeId   String
  basePrice         Decimal                    @db.Decimal(12, 2)
  isPriceAdditive   Boolean                    @default(true)
  memberType        String                     @default("all")
  requiredFileCount Int                        @default(0)
  thumbnailUrl      String?
  detailImages      String[]                   @default([])
  status            String                     @default("active")
  sortOrder         Int                        @default(0)
  createdAt         DateTime                   @default(now())
  updatedAt         DateTime                   @updatedAt
  groupPrices       GroupHalfProductPrice[]
  options           HalfProductOption[]
  priceTiers        HalfProductPriceTier[]
  specifications    HalfProductSpecification[]
  categoryLarge     Category                   @relation(fields: [categoryLargeId], references: [id])
  productLinks      ProductHalfProduct[]

  @@index([categoryLargeId])
  @@map("half_products")
}

model HalfProductSpecification {
  id            String      @id @default(cuid())
  halfProductId String
  name          String
  widthMm       Float
  heightMm      Float
  price         Decimal     @default(0) @db.Decimal(10, 2)
  isDefault     Boolean     @default(false)
  sortOrder     Int         @default(0)
  halfProduct   HalfProduct @relation(fields: [halfProductId], references: [id], onDelete: Cascade)

  @@index([halfProductId])
  @@map("half_product_specifications")
}

model HalfProductPriceTier {
  id            String      @id @default(cuid())
  halfProductId String
  minQuantity   Int
  maxQuantity   Int?
  discountRate  Float
  sortOrder     Int         @default(0)
  halfProduct   HalfProduct @relation(fields: [halfProductId], references: [id], onDelete: Cascade)

  @@index([halfProductId])
  @@map("half_product_price_tiers")
}

model HalfProductOption {
  id            String      @id @default(cuid())
  halfProductId String
  name          String
  type          String
  values        Json
  quantityType  String      @default("auto")
  sortOrder     Int         @default(0)
  halfProduct   HalfProduct @relation(fields: [halfProductId], references: [id], onDelete: Cascade)

  @@index([halfProductId])
  @@map("half_product_options")
}

model GroupHalfProductPrice {
  id            String      @id @default(cuid())
  groupId       String
  halfProductId String
  price         Decimal     @db.Decimal(12, 2)
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  group         ClientGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)
  halfProduct   HalfProduct @relation(fields: [halfProductId], references: [id], onDelete: Cascade)

  @@unique([groupId, halfProductId])
  @@map("group_half_product_prices")
}

model GroupProductPrice {
  id        String      @id @default(cuid())
  groupId   String
  productId String
  price     Decimal     @db.Decimal(12, 2)
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  group     ClientGroup @relation(fields: [groupId], references: [id], onDelete: Cascade)
  product   Product     @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@unique([groupId, productId])
  @@map("group_product_prices")
}

model MyProduct {
  id              String    @id @default(cuid())
  clientId        String
  productId       String
  sortOrder       Int       @default(0)
  usageCount      Int       @default(0)
  lastUsedAt      DateTime?
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  defaultQuantity Int       @default(1)
  memo            String?
  name            String
  options         Json
  thumbnailUrl    String?
  client          Client    @relation(fields: [clientId], references: [id], onDelete: Cascade)
  product         Product   @relation(fields: [productId], references: [id], onDelete: Cascade)

  @@index([clientId])
  @@index([productId])
  @@index([clientId, sortOrder])
  @@map("my_products")
}

model Order {
  id                    String           @id @default(cuid())
  orderNumber           String           @unique
  barcode               String           @unique
  clientId              String
  productPrice          Decimal          @db.Decimal(12, 2)
  shippingFee           Decimal          @default(0) @db.Decimal(10, 2)
  tax                   Decimal          @default(0) @db.Decimal(10, 2)
  adjustmentAmount      Decimal          @default(0) @db.Decimal(10, 2)
  totalAmount           Decimal          @db.Decimal(12, 2)
  finalAmount           Decimal          @db.Decimal(12, 2)
  paymentMethod         String           @default("postpaid")
  paymentStatus         String           @default("pending")
  status                String           @default("pending_receipt")
  currentProcess        String           @default("receipt_pending")
  isUrgent              Boolean          @default(false)
  requestedDeliveryDate DateTime?
  customerMemo          String?
  productMemo           String?
  adminMemo             String?
  orderedAt             DateTime         @default(now())
  createdAt             DateTime         @default(now())
  updatedAt             DateTime         @updatedAt
  isDuplicateOverride   Boolean          @default(false)
  items                 OrderItem[]
  shipping              OrderShipping?
  client                Client           @relation(fields: [clientId], references: [id])
  processHistory        ProcessHistory[]

  @@index([clientId])
  @@index([status])
  @@index([orderedAt])
  @@index([clientId, orderedAt])
  @@index([clientId, status])
  @@index([status, orderedAt])
  @@index([paymentStatus, orderedAt])
  @@map("orders")
}

model OrderShipping {
  id             String    @id @default(cuid())
  orderId        String    @unique
  recipientName  String
  phone          String
  postalCode     String
  address        String
  addressDetail  String?
  courierCode    String?
  trackingNumber String?
  shippedAt      DateTime?
  deliveredAt    DateTime?
  order          Order     @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@map("order_shippings")
}

model OrderItem {
  id                String             @id @default(cuid())
  orderId           String
  productionNumber  String
  productId         String
  productName       String
  size              String
  pages             Int
  printMethod       String
  paper             String
  bindingType       String
  coverMaterial     String?
  foilName          String?
  foilColor         String?
  finishingOptions  String[]           @default([])
  quantity          Int
  unitPrice         Decimal            @db.Decimal(10, 2)
  totalPrice        Decimal            @db.Decimal(12, 2)
  bindingIntentId   String?
  colorIntentId     String?
  fileSpecId        String?
  foldingIntentId   String?
  jdfBindingSide    String?
  jdfBindingType    String?
  jdfCoatingBack    String?
  jdfCoatingFront   String?
  jdfNumColorsBack  Int?
  jdfNumColorsFront Int?
  proofingIntentId  String?
  qualityControlId  String?
  folderName        String?
  thumbnailUrl      String?
  totalFileSize     BigInt             @default(0)
  fabricName        String?
  bindingDirection  String?
  pageLayout        String?
  files             OrderFile[]
  shipping          OrderItemShipping?
  order             Order              @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@index([orderId])
  @@index([colorIntentId])
  @@index([bindingIntentId])
  @@index([productId])
  @@index([orderId, productId])
  @@map("order_items")
}

model OrderItemShipping {
  id                  String    @id @default(cuid())
  orderItemId         String    @unique
  senderType          String
  senderName          String
  senderPhone         String
  senderPostalCode    String?
  senderAddress       String?
  senderAddressDetail String?
  receiverType        String
  recipientName       String
  phone               String
  postalCode          String
  address             String
  addressDetail       String?
  deliveryMethod      String
  deliveryFee         Decimal   @default(0) @db.Decimal(10, 2)
  deliveryFeeType     String?
  courierCode         String?
  trackingNumber      String?
  shippedAt           DateTime?
  deliveredAt         DateTime?
  orderItem           OrderItem @relation(fields: [orderItemId], references: [id], onDelete: Cascade)

  @@map("order_item_shippings")
}

model OrderFile {
  id               String    @id @default(cuid())
  orderItemId      String
  fileName         String
  fileUrl          String
  thumbnailUrl     String?
  pageRange        String
  pageStart        Int
  pageEnd          Int
  width            Int
  height           Int
  widthInch        Float
  heightInch       Float
  dpi              Int
  fileSize         Int
  inspectionStatus String    @default("pending")
  inspectionNote   String?
  sortOrder        Int       @default(0)
  uploadedAt       DateTime  @default(now())
  orderItem        OrderItem @relation(fields: [orderItemId], references: [id], onDelete: Cascade)

  @@index([orderItemId])
  @@map("order_files")
}

model ProcessHistory {
  id          String   @id @default(cuid())
  orderId     String
  fromStatus  String?
  toStatus    String
  processType String
  note        String?
  processedBy String
  processedAt DateTime @default(now())
  order       Order    @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@index([orderId])
  @@index([orderId, processedAt])
  @@map("process_histories")
}

model ReceptionSchedule {
  id          String    @id @default(cuid())
  date        DateTime  @db.Date
  year        Int
  month       Int
  day         Int
  dayOfWeek   Int
  status      String    @default("open")
  openTime    String?
  closeTime   String?
  reason      String?
  reasonType  String?
  isHoliday   Boolean   @default(false)
  holidayName String?
  modifiedBy  String?
  modifiedAt  DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@unique([year, month, day])
  @@index([year, month])
  @@index([status])
  @@map("reception_schedules")
}

model RegularHolidaySetting {
  id            String    @id @default(cuid())
  type          String
  weeklyDays    Int[]     @default([])
  monthlyDays   Int[]     @default([])
  yearlyDates   String[]  @default([])
  effectiveFrom DateTime
  effectiveTo   DateTime?
  name          String
  isActive      Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  @@map("regular_holiday_settings")
}

model PaperGroup {
  id          String   @id @default(cuid())
  code        String   @unique
  name        String
  color       String
  basePrice   Decimal  @default(0) @db.Decimal(12, 2)
  unitType    String   @default("ream")
  description String?
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  papers      Paper[]

  @@index([isActive])
  @@index([color])
  @@map("paper_groups")
}

model PaperSupplier {
  id             String   @id @default(cuid())
  code           String   @unique
  name           String
  phone          String?
  mobile         String?
  email          String?
  fax            String?
  postalCode     String?
  address        String?
  addressDetail  String?
  representative String?
  website        String?
  description    String?
  memo           String?
  sortOrder      Int      @default(0)
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  papers         Paper[]

  @@index([isActive])
  @@map("paper_suppliers")
}

model PaperManufacturer {
  id          String   @id @default(cuid())
  code        String   @unique
  name        String
  country     String?
  website     String?
  contactInfo String?
  description String?
  sortOrder   Int      @default(0)
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  papers      Paper[]

  @@index([isActive])
  @@map("paper_manufacturers")
}

model Paper {
  id                  String             @id @default(cuid())
  code                String             @unique
  name                String
  paperGroupId        String?
  manufacturerId      String?
  supplierId          String?
  paperType           String             @default("sheet")
  sheetSize           String?
  sheetWidthMm        Decimal?           @db.Decimal(10, 2)
  sheetHeightMm       Decimal?           @db.Decimal(10, 2)
  customSheetName     String?
  rollWidth           String?
  rollWidthInch       Decimal?           @db.Decimal(10, 2)
  rollLength          String?
  rollLengthM         Decimal?           @db.Decimal(10, 2)
  grammage            Int?
  grammageDisplay     String?
  finish              String?            @default("matte")
  finishDisplay       String?
  printMethods        String[]           @default([])
  colorType           String?
  colorGroup          String?
  thickness           Decimal?           @db.Decimal(10, 3)
  basePrice           Decimal            @default(0) @db.Decimal(12, 2)
  unitType            String             @default("sheet")
  discountRate        Decimal            @default(0) @db.Decimal(5, 2)
  discountPrice       Decimal?           @db.Decimal(12, 2)
  stockQuantity       Int                @default(0)
  minStockLevel       Int                @default(0)
  description         String?
  memo                String?
  sortOrder           Int                @default(0)
  isActive            Boolean            @default(true)
  createdAt           DateTime           @default(now())
  updatedAt           DateTime           @updatedAt
  nUpIndigo           Int?
  nUpInkjet           Int?
  jdfBackCoating      String?
  jdfFrontCoating     String?
  jdfGrade            Int?               @default(1)
  jdfHoleType         String?
  jdfMediaType        String?            @default("Paper")
  jdfMediaTypeDetails String?
  jdfOpacity          String?            @default("Opaque")
  jdfPrePrinted       Boolean            @default(false)
  jdfTexture          String?
  prices              PaperPrice[]
  manufacturer        PaperManufacturer? @relation(fields: [manufacturerId], references: [id])
  paperGroup          PaperGroup?        @relation(fields: [paperGroupId], references: [id])
  supplier            PaperSupplier?     @relation(fields: [supplierId], references: [id])

  @@index([paperGroupId])
  @@index([manufacturerId])
  @@index([supplierId])
  @@index([paperType])
  @@index([isActive])
  @@map("papers")
}

model PaperPrice {
  id          String   @id @default(cuid())
  paperId     String
  priceType   String   @default("base")
  groupId     String?
  minQuantity Int?
  maxQuantity Int?
  price       Decimal  @db.Decimal(12, 2)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  paper       Paper    @relation(fields: [paperId], references: [id], onDelete: Cascade)

  @@index([paperId])
  @@index([priceType])
  @@map("paper_prices")
}

model ProductionGroup {
  id        String              @id @default(cuid())
  code      String              @unique
  name      String
  depth     Int                 @default(1)
  parentId  String?
  sortOrder Int                 @default(0)
  isActive  Boolean             @default(true)
  createdAt DateTime            @default(now())
  updatedAt DateTime            @updatedAt
  parent    ProductionGroup?    @relation("ProductionGroupTree", fields: [parentId], references: [id])
  children  ProductionGroup[]   @relation("ProductionGroupTree")
  settings          ProductionSetting[]
  productFinishings ProductFinishing[]

  @@index([parentId])
  @@index([isActive])
  @@map("production_groups")
}

model ProductionSetting {
  id                  String                           @id @default(cuid())
  groupId             String
  codeName            String?
  vendorType          String                           @default("in_house")
  pricingType         String                           @default("paper_output_spec")
  settingName         String?
  sCode               String?
  settingFee          Decimal                          @default(0) @db.Decimal(12, 2)
  basePrice           Decimal                          @default(0) @db.Decimal(12, 2)
  workDays            Decimal                          @default(0) @db.Decimal(5, 1)
  weightInfo          String?
  printMethod         String?
  paperIds            String[]                         @default([])
  specUsageType       String                           @default("all")
  singleSidedPrice    Decimal?                         @db.Decimal(12, 2)
  doubleSidedPrice    Decimal?                         @db.Decimal(12, 2)
  baseSpecificationId String?
  basePricePerSqInch  Decimal?                         @db.Decimal(12, 6)
  priceGroups         Json?
  paperPriceGroupMap  Json?
  pageRanges          Json?
  lengthUnit          String?                          @default("cm")
  lengthPriceRanges   Json?
  sortOrder           Int                              @default(0)
  isActive            Boolean                          @default(true)
  createdAt           DateTime                         @default(now())
  updatedAt           DateTime                         @updatedAt
  areaPriceRanges     Json?
  areaUnit            String?                          @default("mm")
  distancePriceRanges Json?
  extraPricePerKm     Decimal?                         @db.Decimal(10, 2)
  freeThreshold       Decimal?                         @db.Decimal(10, 2)
  islandFee           Decimal?                         @db.Decimal(10, 2)
  maxBaseDistance     Int?
  surchargeType       String?                          @default("none")
  clientPrices        ClientProductionSettingPrice[]
  groupPrices         GroupProductionSettingPrice[]
  prices              ProductionSettingPrice[]
  specifications      ProductionSettingSpecification[]
  group               ProductionGroup                  @relation(fields: [groupId], references: [id], onDelete: Cascade)

  @@index([groupId])
  @@index([pricingType])
  @@map("production_settings")
}

model ProductionSettingSpecification {
  id                  String            @id @default(cuid())
  productionSettingId String
  specificationId     String
  price               Decimal?          @db.Decimal(12, 2)
  sortOrder           Int               @default(0)
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  productionSetting   ProductionSetting @relation(fields: [productionSettingId], references: [id], onDelete: Cascade)
  specification       Specification     @relation(fields: [specificationId], references: [id], onDelete: Cascade)

  @@unique([productionSettingId, specificationId])
  @@map("production_setting_specifications")
}

model ProductionSettingPrice {
  id                   String            @id @default(cuid())
  productionSettingId  String
  specificationId      String?
  minQuantity          Int?
  maxQuantity          Int?
  weight               Decimal?          @db.Decimal(5, 2)
  price                Decimal           @default(0) @db.Decimal(12, 2)
  singleSidedPrice     Decimal?          @db.Decimal(12, 2)
  doubleSidedPrice     Decimal?          @db.Decimal(12, 2)
  fourColorSinglePrice Decimal?          @db.Decimal(12, 2)
  fourColorDoublePrice Decimal?          @db.Decimal(12, 2)
  sixColorSinglePrice  Decimal?          @db.Decimal(12, 2)
  sixColorDoublePrice  Decimal?          @db.Decimal(12, 2)
  basePages            Int?
  basePrice            Decimal?          @db.Decimal(12, 2)
  pricePerPage         Decimal?          @db.Decimal(12, 2)
  rangePrices          Json?
  createdAt            DateTime          @default(now())
  updatedAt            DateTime          @updatedAt
  productionSetting    ProductionSetting @relation(fields: [productionSettingId], references: [id], onDelete: Cascade)

  @@index([productionSettingId])
  @@map("production_setting_prices")
}

model GroupProductionSettingPrice {
  id                   String            @id @default(cuid())
  clientGroupId        String
  productionSettingId  String
  specificationId      String?
  minQuantity          Int?
  maxQuantity          Int?
  weight               Decimal?          @db.Decimal(5, 2)
  price                Decimal           @default(0) @db.Decimal(12, 2)
  singleSidedPrice     Decimal?          @db.Decimal(12, 2)
  doubleSidedPrice     Decimal?          @db.Decimal(12, 2)
  fourColorSinglePrice Decimal?          @db.Decimal(12, 2)
  fourColorDoublePrice Decimal?          @db.Decimal(12, 2)
  sixColorSinglePrice  Decimal?          @db.Decimal(12, 2)
  sixColorDoublePrice  Decimal?          @db.Decimal(12, 2)
  basePages            Int?
  basePrice            Decimal?          @db.Decimal(12, 2)
  pricePerPage         Decimal?          @db.Decimal(12, 2)
  rangePrices          Json?
  createdAt            DateTime          @default(now())
  updatedAt            DateTime          @updatedAt
  priceGroupId         String?
  clientGroup          ClientGroup       @relation(fields: [clientGroupId], references: [id], onDelete: Cascade)
  productionSetting    ProductionSetting @relation(fields: [productionSettingId], references: [id], onDelete: Cascade)

  @@unique([clientGroupId, productionSettingId, specificationId, priceGroupId, minQuantity])
  @@index([clientGroupId])
  @@index([productionSettingId])
  @@index([priceGroupId])
  @@map("group_production_setting_prices")
}

model ClientProductionSettingPrice {
  id                   String            @id @default(cuid())
  clientId             String
  productionSettingId  String
  specificationId      String?
  priceGroupId         String?
  minQuantity          Int?
  maxQuantity          Int?
  weight               Decimal?          @db.Decimal(5, 2)
  price                Decimal           @default(0) @db.Decimal(12, 2)
  singleSidedPrice     Decimal?          @db.Decimal(12, 2)
  doubleSidedPrice     Decimal?          @db.Decimal(12, 2)
  fourColorSinglePrice Decimal?          @db.Decimal(12, 2)
  fourColorDoublePrice Decimal?          @db.Decimal(12, 2)
  sixColorSinglePrice  Decimal?          @db.Decimal(12, 2)
  sixColorDoublePrice  Decimal?          @db.Decimal(12, 2)
  basePages            Int?
  basePrice            Decimal?          @db.Decimal(12, 2)
  pricePerPage         Decimal?          @db.Decimal(12, 2)
  rangePrices          Json?
  createdAt            DateTime          @default(now())
  updatedAt            DateTime          @updatedAt
  client               Client            @relation(fields: [clientId], references: [id], onDelete: Cascade)
  productionSetting    ProductionSetting @relation(fields: [productionSettingId], references: [id], onDelete: Cascade)

  @@unique([clientId, productionSettingId, specificationId, priceGroupId, minQuantity])
  @@index([clientId])
  @@index([productionSettingId])
  @@index([priceGroupId])
  @@map("client_production_setting_prices")
}

model ConsultationCategory {
  id            String         @id @default(cuid())
  code          String         @unique
  name          String
  colorCode     String?
  sortOrder     Int            @default(0)
  isActive      Boolean        @default(true)
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  description   String?
  consultations Consultation[]

  @@index([isActive])
  @@map("consultation_categories")
}

model Consultation {
  id             String                 @id @default(cuid())
  consultNumber  String                 @unique
  clientId       String
  categoryId     String
  title          String
  content        String
  orderId        String?
  orderNumber    String?
  counselorId    String
  counselorName  String
  consultedAt    DateTime               @default(now())
  status         String                 @default("open")
  priority       String                 @default("normal")
  resolution     String?
  resolvedAt     DateTime?
  resolvedBy     String?
  followUpDate   DateTime?
  followUpNote   String?
  kakaoScheduled Boolean                @default(false)
  kakaoSendAt    DateTime?
  kakaoSentAt    DateTime?
  kakaoMessage   String?
  attachments    Json?
  internalMemo   String?
  createdAt      DateTime               @default(now())
  updatedAt      DateTime               @updatedAt
  closedAt       DateTime?
  closedBy       String?
  inProgressAt   DateTime?
  inProgressBy   String?
  openedAt       DateTime               @default(now())
  openedBy       String?
  followUps      ConsultationFollowUp[]
  messages       ConsultationMessage[]
  category       ConsultationCategory   @relation(fields: [categoryId], references: [id])
  client         Client                 @relation(fields: [clientId], references: [id], onDelete: Cascade)

  @@index([clientId])
  @@index([categoryId])
  @@index([counselorId])
  @@index([status])
  @@index([consultedAt])
  @@index([followUpDate])
  @@map("consultations")
}

model ConsultationFollowUp {
  id             String       @id @default(cuid())
  consultationId String
  content        String
  actionType     String
  staffId        String
  staffName      String
  createdAt      DateTime     @default(now())
  consultation   Consultation @relation(fields: [consultationId], references: [id], onDelete: Cascade)

  @@index([consultationId])
  @@map("consultation_follow_ups")
}

model CustomerHealthScore {
  id                 String   @id @default(cuid())
  clientId           String   @unique
  claimScore         Int      @default(100)
  satisfactionScore  Int      @default(100)
  loyaltyScore       Int      @default(100)
  communicationScore Int      @default(100)
  totalScore         Int      @default(100)
  grade              String   @default("A")
  isAtRisk           Boolean  @default(false)
  riskReason         String?
  lastCalculatedAt   DateTime @default(now())
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
  client             Client   @relation(fields: [clientId], references: [id], onDelete: Cascade)

  @@index([totalScore])
  @@index([isAtRisk])
  @@index([grade])
  @@map("customer_health_scores")
}

model ConsultationTag {
  id            String                   @id @default(cuid())
  code          String                   @unique
  name          String
  colorCode     String?
  category      String                   @default("claim")
  sortOrder     Int                      @default(0)
  isActive      Boolean                  @default(true)
  isAutoTag     Boolean                  @default(false)
  keywords      String[]                 @default([])
  createdAt     DateTime                 @default(now())
  updatedAt     DateTime                 @updatedAt
  consultations ConsultationTagMapping[]

  @@index([category])
  @@index([isActive])
  @@map("consultation_tags")
}

model ConsultationTagMapping {
  id             String          @id @default(cuid())
  consultationId String
  tagId          String
  isAutoTagged   Boolean         @default(false)
  confidence     Decimal?        @db.Decimal(3, 2)
  createdAt      DateTime        @default(now())
  tag            ConsultationTag @relation(fields: [tagId], references: [id], onDelete: Cascade)

  @@unique([consultationId, tagId])
  @@index([consultationId])
  @@index([tagId])
  @@map("consultation_tag_mappings")
}

model ConsultationChannel {
  id             String   @id @default(cuid())
  consultationId String
  channel        String
  channelDetail  String?
  direction      String   @default("inbound")
  callDuration   Int?
  callRecordUrl  String?
  metadata       Json?
  createdAt      DateTime @default(now())

  @@index([consultationId])
  @@index([channel])
  @@map("consultation_channels")
}

model ConsultationAlert {
  id               String    @id @default(cuid())
  clientId         String?
  consultationId   String?
  alertType        String
  alertLevel       String    @default("warning")
  title            String
  message          String
  triggerCondition Json?
  isRead           Boolean   @default(false)
  readAt           DateTime?
  readBy           String?
  isResolved       Boolean   @default(false)
  resolvedAt       DateTime?
  resolvedBy       String?
  resolution       String?
  createdAt        DateTime  @default(now())
  expiresAt        DateTime?

  @@index([clientId])
  @@index([consultationId])
  @@index([alertType])
  @@index([isRead])
  @@index([isResolved])
  @@index([createdAt])
  @@map("consultation_alerts")
}

model ConsultationSLA {
  id                  String   @id @default(cuid())
  name                String
  categoryId          String?
  priority            String?
  firstResponseTarget Int      @default(60)
  resolutionTarget    Int      @default(1440)
  escalationTime      Int?
  escalateTo          String?
  warningThreshold    Int      @default(80)
  criticalThreshold   Int      @default(100)
  sortOrder           Int      @default(0)
  isActive            Boolean  @default(true)
  createdAt           DateTime @default(now())
  updatedAt           DateTime @updatedAt

  @@map("consultation_slas")
}

model ConsultationSurvey {
  id                 String   @id @default(cuid())
  consultationId     String   @unique
  satisfactionScore  Int
  responseSpeedScore Int?
  resolutionScore    Int?
  friendlinessScore  Int?
  feedback           String?
  wouldRecommend     Boolean?
  surveyMethod       String   @default("email")
  surveyedAt         DateTime @default(now())
  createdAt          DateTime @default(now())

  @@index([consultationId])
  @@index([satisfactionScore])
  @@map("consultation_surveys")
}

model ConsultationGuide {
  id              String   @id @default(cuid())
  categoryId      String?
  tagCodes        String[] @default([])
  title           String
  problem         String
  solution        String
  scripts         Json?
  relatedGuideIds String[] @default([])
  attachments     Json?
  usageCount      Int      @default(0)
  helpfulCount    Int      @default(0)
  sortOrder       Int      @default(0)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([categoryId])
  @@map("consultation_guides")
}

model ConsultationStatSnapshot {
  id                   String   @id @default(cuid())
  period               String
  periodStart          DateTime
  periodEnd            DateTime
  totalCount           Int      @default(0)
  claimCount           Int      @default(0)
  inquiryCount         Int      @default(0)
  salesCount           Int      @default(0)
  resolvedCount        Int      @default(0)
  pendingCount         Int      @default(0)
  avgFirstResponseTime Decimal? @db.Decimal(10, 2)
  avgResolutionTime    Decimal? @db.Decimal(10, 2)
  slaComplianceRate    Decimal? @db.Decimal(5, 2)
  avgSatisfactionScore Decimal? @db.Decimal(3, 2)
  channelStats         Json?
  categoryStats        Json?
  tagStats             Json?
  counselorStats       Json?
  createdAt            DateTime @default(now())

  @@unique([period, periodStart])
  @@index([period])
  @@index([periodStart])
  @@map("consultation_stat_snapshots")
}

model Todo {
  id              String    @id @default(cuid())
  creatorId       String
  creatorName     String
  creatorDeptId   String?
  creatorDeptName String?
  title           String
  content         String?
  priority        String    @default("normal")
  startDate       DateTime?
  dueDate         DateTime?
  isAllDay        Boolean   @default(false)
  status          String    @default("pending")
  completedAt     DateTime?
  completedBy     String?
  isPersonal      Boolean   @default(true)
  isDepartment    Boolean   @default(false)
  isCompany       Boolean   @default(false)
  sharedDeptIds   String[]  @default([])
  reminderAt      DateTime?
  isReminderSent  Boolean   @default(false)
  isRecurring     Boolean   @default(false)
  recurringType   String?
  recurringEnd    DateTime?
  relatedType     String?
  relatedId       String?
  color           String?   @default("#3B82F6")
  tags            String[]  @default([])
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt

  @@index([creatorId])
  @@index([creatorDeptId])
  @@index([status])
  @@index([dueDate])
  @@index([isPersonal])
  @@index([isDepartment])
  @@index([isCompany])
  @@map("todos")
}

model Schedule {
  id              String    @id @default(cuid())
  creatorId       String
  creatorName     String
  creatorDeptId   String?
  creatorDeptName String?
  title           String
  description     String?
  location        String?
  startAt         DateTime
  endAt           DateTime
  isAllDay        Boolean   @default(false)
  isPersonal      Boolean   @default(true)
  isDepartment    Boolean   @default(false)
  isCompany       Boolean   @default(false)
  sharedDeptIds   String[]  @default([])
  scheduleType    String    @default("meeting")
  reminders       Json?
  isRecurring     Boolean   @default(false)
  recurringRule   String?
  recurringEnd    DateTime?
  parentId        String?
  attendees       Json?
  color           String?   @default("#3B82F6")
  tags            String[]  @default([])
  relatedType     String?
  relatedId       String?
  status          String    @default("confirmed")
  createdAt       DateTime  @default(now())
  updatedAt       DateTime  @updatedAt
  recurringConfig Json?

  @@index([creatorId])
  @@index([creatorDeptId])
  @@index([startAt])
  @@index([endAt])
  @@index([isPersonal])
  @@index([isDepartment])
  @@index([isCompany])
  @@index([scheduleType])
  @@index([parentId])
  @@map("schedules")
}

model FoilColor {
  id        String   @id @default(cuid())
  code      String   @unique
  name      String
  colorHex  String?
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("foil_colors")
}

model PlatePosition {
  id        String   @id @default(cuid())
  code      String   @unique
  name      String
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("plate_positions")
}

model CopperPlate {
  id               String               @id @default(cuid())
  clientId         String
  plateName        String
  plateCode        String?
  foilColor        String
  foilColorName    String?
  widthMm          Decimal?             @db.Decimal(10, 2)
  heightMm         Decimal?             @db.Decimal(10, 2)
  storageLocation  String?
  imageUrl         String?
  designFileUrl    String?
  notes            String?
  registeredById   String?
  registeredBy     String?
  status           String               @default("stored")
  sortOrder        Int                  @default(0)
  usageCount       Int                  @default(0)
  firstUsedAt      DateTime?
  lastUsedAt       DateTime?
  returnedAt       DateTime?
  createdAt        DateTime             @default(now())
  updatedAt        DateTime             @updatedAt
  aiFileUrl        String?
  albumPhotoUrl    String?
  appliedAlbumName String?
  foilPosition     String?
  plateType        String               @default("copper")
  registeredAt     DateTime             @default(now())
  histories        CopperPlateHistory[]
  client           Client               @relation(fields: [clientId], references: [id], onDelete: Cascade)

  @@index([clientId])
  @@index([status])
  @@index([plateType])
  @@map("copper_plates")
}

model CopperPlateHistory {
  id               String      @id @default(cuid())
  copperPlateId    String
  actionType       String
  previousStatus   String?
  newStatus        String?
  previousLocation String?
  newLocation      String?
  orderId          String?
  orderNumber      String?
  description      String?
  actionById       String?
  actionBy         String?
  createdAt        DateTime    @default(now())
  copperPlate      CopperPlate @relation(fields: [copperPlateId], references: [id], onDelete: Cascade)

  @@index([copperPlateId])
  @@index([actionType])
  @@map("copper_plate_histories")
}

model PublicCopperPlate {
  id                   String                     @id @default(cuid())
  plateName            String
  plateCode            String?                    @unique
  plateType            String                     @default("copper")
  widthMm              Decimal?                   @db.Decimal(10, 2)
  heightMm             Decimal?                   @db.Decimal(10, 2)
  storageLocation      String?
  imageUrl             String?
  aiFileUrl            String?
  designFileUrl        String?
  description          String?
  defaultEngravingText String?
  status               String                     @default("active")
  sortOrder            Int                        @default(0)
  usageCount           Int                        @default(0)
  createdAt            DateTime                   @default(now())
  updatedAt            DateTime                   @updatedAt
  productPlates        ProductPublicCopperPlate[]

  @@index([status])
  @@index([plateType])
  @@map("public_copper_plates")
}

model ProductPublicCopperPlate {
  id                  String            @id @default(cuid())
  productId           String
  publicCopperPlateId String
  engravingText       String?
  isDefault           Boolean           @default(false)
  sortOrder           Int               @default(0)
  createdAt           DateTime          @default(now())
  updatedAt           DateTime          @updatedAt
  product             Product           @relation(fields: [productId], references: [id], onDelete: Cascade)
  publicCopperPlate   PublicCopperPlate @relation(fields: [publicCopperPlateId], references: [id], onDelete: Cascade)

  @@unique([productId, publicCopperPlateId])
  @@index([productId])
  @@index([publicCopperPlateId])
  @@map("product_public_copper_plates")
}

model FabricSupplier {
  id             String   @id @default(cuid())
  code           String   @unique
  name           String
  phone          String?
  mobile         String?
  email          String?
  fax            String?
  postalCode     String?
  address        String?
  addressDetail  String?
  representative String?
  website        String?
  description    String?
  memo           String?
  sortOrder      Int      @default(0)
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  fabrics        Fabric[]

  @@index([isActive])
  @@map("fabric_suppliers")
}

model Fabric {
  id              String           @id @default(cuid())
  code            String           @unique
  name            String
  category        String           @default("cloth")
  material        String           @default("cotton")
  colorCode       String?
  colorName       String?
  widthCm         Decimal?         @db.Decimal(10, 2)
  thickness       Decimal?         @db.Decimal(10, 3)
  weight          Decimal?         @db.Decimal(10, 2)
  supplierId      String?
  basePrice       Decimal          @default(0) @db.Decimal(12, 2)
  unitType        String           @default("m")
  discountRate    Decimal          @default(0) @db.Decimal(5, 2)
  discountPrice   Decimal?         @db.Decimal(12, 2)
  stockQuantity   Int              @default(0)
  minStockLevel   Int              @default(0)
  forAlbumCover   Boolean          @default(false)
  forBoxCover     Boolean          @default(false)
  forFrameCover   Boolean          @default(false)
  forOther        Boolean          @default(false)
  imageUrl        String?
  thumbnailUrl    String?
  description     String?
  memo            String?
  sortOrder       Int              @default(0)
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  supplier        FabricSupplier?  @relation(fields: [supplierId], references: [id])
  photobookOrders PhotobookOrder[]

  @@index([supplierId])
  @@index([category])
  @@index([material])
  @@index([isActive])
  @@map("fabrics")
}

model Coating {
  id              String           @id @default(cuid())
  code            String           @unique
  name            String
  type            String           @default("glossy")
  basePrice       Decimal          @default(0) @db.Decimal(12, 2)
  pricePerPage    Decimal          @default(0) @db.Decimal(10, 2)
  description     String?
  memo            String?
  sortOrder       Int              @default(0)
  isActive        Boolean          @default(true)
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  photobookOrders PhotobookOrder[]

  @@index([type])
  @@index([isActive])
  @@map("coatings")
}

model StandardSize {
  id         String   @id @default(cuid())
  name       String   @unique
  widthInch  Float
  heightInch Float
  ratio      Float
  ratioLabel String
  sortOrder  Int      @default(0)
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@index([ratio])
  @@index([isActive])
  @@map("standard_sizes")
}

model PhotobookOrder {
  id               String          @id @default(cuid())
  orderNumber      String          @unique
  orderTitle       String
  status           String          @default("DRAFT")
  editStyle        String          @default("SINGLE")
  bindingDirection String          @default("LEFT_START_RIGHT_END")
  fabricId         String?
  coatingId        String?
  quantity         Int             @default(1)
  specWidth        Float?
  specHeight       Float?
  specRatio        Float?
  dpi              Int?
  pageCount        Int?
  totalFileSize    BigInt?
  validationStatus String          @default("PENDING")
  unitPrice        Decimal         @default(0) @db.Decimal(10, 2)
  totalPrice       Decimal         @default(0) @db.Decimal(10, 2)
  clientId         String?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt
  createdBy        String?
  approvedAt       DateTime?
  approvedBy       String?
  files            PhotobookFile[]
  client           Client?         @relation(fields: [clientId], references: [id])
  coating          Coating?        @relation(fields: [coatingId], references: [id])
  fabric           Fabric?         @relation(fields: [fabricId], references: [id])

  @@index([clientId])
  @@index([status])
  @@index([validationStatus])
  @@map("photobook_orders")
}

model PhotobookFile {
  id              String         @id @default(cuid())
  orderId         String
  fileName        String
  originalName    String
  filePath        String
  fileSize        BigInt
  pageNumber      Int
  widthPx         Int
  heightPx        Int
  dpi             Int            @default(300)
  widthInch       Float
  heightInch      Float
  colorSpace      String?
  sizeMatchStatus String         @default("PENDING")
  ratio           Float?
  createdAt       DateTime       @default(now())
  order           PhotobookOrder @relation(fields: [orderId], references: [id], onDelete: Cascade)

  @@index([orderId])
  @@index([sizeMatchStatus])
  @@map("photobook_files")
}

model ConsultationMessage {
  id             String       @id @default(cuid())
  consultationId String
  direction      String
  channel        String       @default("kakao")
  content        String
  attachments    Json?
  senderName     String?
  senderType     String?
  staffId        String?
  staffName      String?
  messageAt      DateTime     @default(now())
  isRead         Boolean      @default(false)
  readAt         DateTime?
  createdAt      DateTime     @default(now())
  consultation   Consultation @relation(fields: [consultationId], references: [id], onDelete: Cascade)

  @@index([consultationId])
  @@index([direction])
  @@index([isRead])
  @@map("consultation_messages")
}

model Account {
  id             String         @id @default(cuid())
  code           String         @unique
  name           String
  type           AccountType
  parentId       String?
  description    String?
  isActive       Boolean        @default(true)
  sortOrder      Int            @default(0)
  createdAt      DateTime       @default(now())
  updatedAt      DateTime       @updatedAt
  level          Int            @default(1)
  nameEn         String?
  parent         Account?       @relation("AccountHierarchy", fields: [parentId], references: [id])
  children       Account[]      @relation("AccountHierarchy")
  journalEntries JournalEntry[]

  @@index([type])
  @@index([isActive])
  @@index([code])
  @@map("accounts")
}

model Journal {
  id          String         @id @default(cuid())
  voucherNo   String         @unique
  voucherType VoucherType
  journalDate DateTime
  clientId    String?
  clientName  String?
  description String?
  totalAmount Decimal        @db.Decimal(12, 2)
  orderId     String?
  orderNumber String?
  createdBy   String
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  sourceId    String?
  sourceType  String?
  entries     JournalEntry[]

  @@index([journalDate])
  @@index([clientId])
  @@index([voucherType])
  @@index([sourceType, sourceId])
  @@map("journals")
}

model JournalEntry {
  id              String          @id @default(cuid())
  journalId       String
  accountId       String
  transactionType TransactionType
  amount          Decimal         @db.Decimal(12, 2)
  description     String?
  sortOrder       Int             @default(0)
  account         Account         @relation(fields: [accountId], references: [id])
  journal         Journal         @relation(fields: [journalId], references: [id], onDelete: Cascade)

  @@index([journalId])
  @@index([accountId])
  @@map("journal_entries")
}

model Receivable {
  id             String              @id @default(cuid())
  clientId       String
  clientName     String
  clientCode     String?
  orderId        String?
  orderNumber    String?
  journalId      String?
  originalAmount Decimal             @db.Decimal(12, 2)
  paidAmount     Decimal             @default(0) @db.Decimal(12, 2)
  balance        Decimal             @db.Decimal(12, 2)
  issueDate      DateTime
  dueDate        DateTime?
  status         String              @default("outstanding")
  description    String?
  createdAt      DateTime            @default(now())
  updatedAt      DateTime            @updatedAt
  payments       ReceivablePayment[]

  @@index([clientId])
  @@index([dueDate])
  @@index([status])
  @@map("receivables")
}

model ReceivablePayment {
  id            String     @id @default(cuid())
  receivableId  String
  amount        Decimal    @db.Decimal(12, 2)
  paymentDate   DateTime
  paymentMethod String?
  description   String?
  journalId     String?
  createdBy     String?
  createdAt     DateTime   @default(now())
  receivable    Receivable @relation(fields: [receivableId], references: [id], onDelete: Cascade)

  @@index([receivableId])
  @@index([paymentDate])
  @@map("receivable_payments")
}

model Payable {
  id             String           @id @default(cuid())
  supplierId     String?
  supplierName   String
  supplierCode   String?
  journalId      String?
  originalAmount Decimal          @db.Decimal(12, 2)
  paidAmount     Decimal          @default(0) @db.Decimal(12, 2)
  balance        Decimal          @db.Decimal(12, 2)
  issueDate      DateTime
  dueDate        DateTime?
  status         String           @default("outstanding")
  description    String?
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  payments       PayablePayment[]

  @@index([supplierId])
  @@index([dueDate])
  @@index([status])
  @@map("payables")
}

model PayablePayment {
  id            String   @id @default(cuid())
  payableId     String
  amount        Decimal  @db.Decimal(12, 2)
  paymentDate   DateTime
  paymentMethod String?
  description   String?
  journalId     String?
  createdBy     String?
  createdAt     DateTime @default(now())
  payable       Payable  @relation(fields: [payableId], references: [id], onDelete: Cascade)

  @@index([payableId])
  @@index([paymentDate])
  @@map("payable_payments")
}

model BankAccount {
  id            String   @id @default(cuid())
  accountName   String
  bankName      String
  accountNumber String
  accountHolder String?
  balance       Decimal  @default(0) @db.Decimal(14, 2)
  isDefault     Boolean  @default(false)
  isActive      Boolean  @default(true)
  description   String?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([isActive])
  @@map("bank_accounts")
}

model Settlement {
  id                 String    @id @default(cuid())
  periodType         String
  periodStart        DateTime
  periodEnd          DateTime
  totalSales         Decimal   @default(0) @db.Decimal(14, 2)
  totalPurchases     Decimal   @default(0) @db.Decimal(14, 2)
  totalIncome        Decimal   @default(0) @db.Decimal(14, 2)
  totalExpense       Decimal   @default(0) @db.Decimal(14, 2)
  receivablesBalance Decimal   @default(0) @db.Decimal(14, 2)
  payablesBalance    Decimal   @default(0) @db.Decimal(14, 2)
  netProfit          Decimal   @default(0) @db.Decimal(14, 2)
  netCashFlow        Decimal   @default(0) @db.Decimal(14, 2)
  status             String    @default("draft")
  confirmedBy        String?
  confirmedAt        DateTime?
  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt

  @@unique([periodType, periodStart])
  @@index([periodType])
  @@index([periodStart])
  @@index([status])
  @@map("settlements")
}

model SalesLedger {
  id                String            @id @default(cuid())
  ledgerNumber      String            @unique
  ledgerDate        DateTime
  salesDate         DateTime?
  clientId          String
  clientName        String
  clientBizNo       String?
  orderId           String            @unique
  orderNumber       String
  salesType         SalesType         @default(ALBUM)
  taxType           TaxType           @default(TAXABLE)
  supplyAmount      Decimal           @db.Decimal(12, 2)
  vatAmount         Decimal           @db.Decimal(10, 2)
  shippingFee       Decimal           @default(0) @db.Decimal(10, 2)
  adjustmentAmount  Decimal           @default(0) @db.Decimal(10, 2)
  totalAmount       Decimal           @db.Decimal(12, 2)
  receivedAmount    Decimal           @default(0) @db.Decimal(12, 2)
  outstandingAmount Decimal           @db.Decimal(12, 2)
  paymentMethod     String            @default("postpaid")
  paymentStatus     String            @default("unpaid")
  dueDate           DateTime?
  salesStatus       SalesStatus       @default(REGISTERED)
  description       String?
  adminMemo         String?
  createdBy         String
  confirmedBy       String?
  confirmedAt       DateTime?
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  items             SalesLedgerItem[]
  client            Client            @relation("SalesLedgerClient", fields: [clientId], references: [id])
  receipts          SalesReceipt[]

  @@index([clientId])
  @@index([ledgerDate])
  @@index([salesStatus])
  @@index([paymentStatus])
  @@index([orderId])
  @@index([clientId, ledgerDate])
  @@index([salesStatus, ledgerDate])
  @@index([paymentStatus, ledgerDate])
  @@map("sales_ledgers")
}

model SalesLedgerItem {
  id            String      @id @default(cuid())
  salesLedgerId String
  orderItemId   String?
  itemName      String
  specification String?
  quantity      Int
  unitPrice     Decimal     @db.Decimal(10, 2)
  supplyAmount  Decimal     @db.Decimal(12, 2)
  vatAmount     Decimal     @db.Decimal(10, 2)
  totalAmount   Decimal     @db.Decimal(12, 2)
  salesType     SalesType   @default(ALBUM)
  productId     String?
  sortOrder     Int         @default(0)
  remark        String?
  salesLedger   SalesLedger @relation(fields: [salesLedgerId], references: [id], onDelete: Cascade)

  @@index([salesLedgerId])
  @@map("sales_ledger_items")
}

model SalesReceipt {
  id            String      @id @default(cuid())
  salesLedgerId String
  receiptNumber String      @unique
  receiptDate   DateTime
  amount        Decimal     @db.Decimal(12, 2)
  paymentMethod String
  bankName      String?
  depositorName String?
  journalId     String?
  note          String?
  createdBy     String
  createdAt     DateTime    @default(now())
  salesLedger   SalesLedger @relation(fields: [salesLedgerId], references: [id], onDelete: Cascade)

  @@index([salesLedgerId])
  @@index([receiptDate])
  @@map("sales_receipts")
}

model PurchaseLedger {
  id                String               @id @default(cuid())
  ledgerNumber      String               @unique
  ledgerDate        DateTime
  confirmDate       DateTime?
  supplierId        String
  supplierName      String
  supplierBizNo     String?
  purchaseType      PurchaseType         @default(RAW_MATERIAL)
  taxType           TaxType              @default(TAXABLE)
  accountCode       String               @default("120")
  supplyAmount      Decimal              @db.Decimal(12, 2)
  vatAmount         Decimal              @db.Decimal(10, 2)
  adjustmentAmount  Decimal              @default(0) @db.Decimal(10, 2)
  totalAmount       Decimal              @db.Decimal(12, 2)
  paidAmount        Decimal              @default(0) @db.Decimal(12, 2)
  outstandingAmount Decimal              @db.Decimal(12, 2)
  paymentMethod     String               @default("postpaid")
  paymentStatus     String               @default("unpaid")
  dueDate           DateTime?
  purchaseStatus    PurchaseStatus       @default(REGISTERED)
  description       String?
  adminMemo         String?
  createdBy         String
  confirmedBy       String?
  confirmedAt       DateTime?
  createdAt         DateTime             @default(now())
  updatedAt         DateTime             @updatedAt
  items             PurchaseLedgerItem[]
  supplier          Client               @relation("PurchaseLedgerSupplier", fields: [supplierId], references: [id])
  payments          PurchasePayment[]

  @@index([supplierId])
  @@index([ledgerDate])
  @@index([purchaseStatus])
  @@index([paymentStatus])
  @@map("purchase_ledgers")
}

model PurchaseLedgerItem {
  id               String         @id @default(cuid())
  purchaseLedgerId String
  itemName         String
  specification    String?
  quantity         Int
  unit             String?
  unitPrice        Decimal        @db.Decimal(10, 2)
  supplyAmount     Decimal        @db.Decimal(12, 2)
  vatAmount        Decimal        @db.Decimal(10, 2)
  totalAmount      Decimal        @db.Decimal(12, 2)
  purchaseType     PurchaseType   @default(RAW_MATERIAL)
  accountCode      String?
  sortOrder        Int            @default(0)
  remark           String?
  purchaseLedger   PurchaseLedger @relation(fields: [purchaseLedgerId], references: [id], onDelete: Cascade)

  @@index([purchaseLedgerId])
  @@map("purchase_ledger_items")
}

model PurchasePayment {
  id               String         @id @default(cuid())
  purchaseLedgerId String
  paymentNumber    String         @unique
  paymentDate      DateTime
  amount           Decimal        @db.Decimal(12, 2)
  paymentMethod    String
  bankName         String?
  accountNumber    String?
  journalId        String?
  note             String?
  createdBy        String
  createdAt        DateTime       @default(now())
  purchaseLedger   PurchaseLedger @relation(fields: [purchaseLedgerId], references: [id], onDelete: Cascade)

  @@index([purchaseLedgerId])
  @@index([paymentDate])
  @@map("purchase_payments")
}

model ColorIntent {
  id                 String   @id @default(cuid())
  code               String   @unique
  name               String
  numColorsFront     Int      @default(4)
  numColorsBack      Int      @default(0)
  colorType          String   @default("Process")
  colorantOrder      String[] @default([])
  coatingFront       String?
  coatingBack        String?
  colorStandard      String?  @default("FOGRA39")
  printingTechnology String?  @default("DigitalPrinting")
  displayNameKo      String?
  sortOrder          Int      @default(0)
  isActive           Boolean  @default(true)
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt

  @@index([isActive])
  @@map("color_intents")
}

model BindingIntent {
  id              String   @id @default(cuid())
  code            String   @unique
  name            String
  jdfBindingType  String   @default("SoftCover")
  jdfBindingSide  String   @default("Left")
  jdfBindingOrder String?  @default("Gathering")
  edgeGilding     String?
  spineThickness  String?  @default("Auto")
  coverType       String?  @default("Separate")
  displayNameKo   String?
  basePrice       Decimal  @default(0) @db.Decimal(12, 2)
  sortOrder       Int      @default(0)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([isActive])
  @@map("binding_intents")
}

model FoldingIntent {
  id             String   @id @default(cuid())
  code           String   @unique
  name           String
  jdfFoldCatalog String
  foldCount      Int      @default(1)
  foldDirection  String?  @default("Parallel")
  diagramUrl     String?
  displayNameKo  String?
  basePrice      Decimal  @default(0) @db.Decimal(12, 2)
  pricePerFold   Decimal  @default(0) @db.Decimal(10, 2)
  sortOrder      Int      @default(0)
  isActive       Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@index([isActive])
  @@map("folding_intents")
}

model ProofingIntent {
  id              String   @id @default(cuid())
  code            String   @unique
  name            String
  jdfProofType    String   @default("None")
  jdfProofQuality String?  @default("Standard")
  isColorProof    Boolean  @default(false)
  isContractProof Boolean  @default(false)
  displayNameKo   String?
  basePrice       Decimal  @default(0) @db.Decimal(12, 2)
  sortOrder       Int      @default(0)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@index([isActive])
  @@map("proofing_intents")
}

model FileSpec {
  id            String   @id @default(cuid())
  code          String   @unique
  name          String
  mimeType      String   @default("application/pdf")
  resolutionX   Int      @default(300)
  resolutionY   Int      @default(300)
  minResolution Int      @default(200)
  colorSpace    String   @default("CMYK")
  colorProfile  String?
  compression   String?  @default("None")
  screeningType String?  @default("AM")
  screenLPI     Int?     @default(175)
  maxFileSizeMB Int?     @default(500)
  displayNameKo String?
  sortOrder     Int      @default(0)
  isActive      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@index([isActive])
  @@map("file_specs")
}

model QualityControl {
  id               String   @id @default(cuid())
  code             String   @unique
  name             String
  deltaE           Decimal? @db.Decimal(5, 2)
  colorTolerance   String?  @default("Standard")
  densityCyan      Decimal? @db.Decimal(5, 2)
  densityMagenta   Decimal? @db.Decimal(5, 2)
  densityYellow    Decimal? @db.Decimal(5, 2)
  densityBlack     Decimal? @db.Decimal(5, 2)
  dotGainTarget    Int?     @default(15)
  trimTolerance    Decimal? @default(0.5) @db.Decimal(5, 2)
  foldTolerance    Decimal? @default(1.0) @db.Decimal(5, 2)
  bindingTolerance Decimal? @default(2.0) @db.Decimal(5, 2)
  displayNameKo    String?
  checklistItems   Json?
  sortOrder        Int      @default(0)
  isActive         Boolean  @default(true)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@index([isActive])
  @@map("quality_controls")
}

enum AccountType {
  ASSET
  LIABILITY
  EQUITY
  REVENUE
  EXPENSE
}

enum VoucherType {
  RECEIPT
  PAYMENT
  TRANSFER
}

enum TransactionType {
  DEBIT
  CREDIT
}

enum SalesType {
  ALBUM
  PRINT
  FRAME
  GOODS
  BINDING
  DESIGN
  SHIPPING
  OTHER
}

enum TaxType {
  TAXABLE
  ZERO_RATED
  EXEMPT
}

enum SalesStatus {
  REGISTERED
  CONFIRMED
  CANCELLED
}

enum PurchaseType {
  RAW_MATERIAL
  MERCHANDISE
  SUPPLIES
  OUTSOURCING
  EQUIPMENT
  SERVICE
  OTHER
}

enum PurchaseStatus {
  REGISTERED
  CONFIRMED
  CANCELLED
}
